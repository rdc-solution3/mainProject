(function (win, ysp) {
  ysp.runtime.Model.extendLoadingModel({
    getData_control154_VctODx: function (elem) {
      return true;
    },
    doAction_uiControl161_4iHFyf: function (data, elem) {
      var doc_d = elem.ownerDocument;var win_d = doc_d.defaultView;if (data.eventType === 'signClick') {
        elem.click();
      }if (data.eventType === 'clickToClose') {
        if (doc_d.querySelector('.sign-tools .icon-cancel')) {
          doc_d.querySelector('.sign-tools .icon-cancel').click();
        }
      }if (data.eventType === 'clickToClear') {
        if (doc_d.querySelector('.sign-tools .icon-reset')) {
          doc_d.querySelector('.sign-tools .icon-reset').click();
        }
      }if (data.eventType === 'imgUrl') {
        var dataUrl = data.dataCustom[0];var width = data.dataCustom[1];var height = data.dataCustom[2];var contract = doc_d.querySelector('#contract');var signElem = doc_d.querySelector('#contract #signature');var draggable = doc_d.querySelector('#contract #signature .draggable');var img = $(contract).find('#signature').find('.draggable').find('img[src]')[0];if (contract) {
          if (!signElem) {
            $(contract).append('<div id="signature"></div>');
          }if (!draggable) {
            $(contract).find('#signature').append('<div draggable="false" class="draggable"></div>');
          }if (!img) {
            $(contract).find('#signature').find('.draggable').append('<img src="' + dataUrl + '"/>');if (doc_d.querySelector('.sign-tools .icon-cancel')) {
              doc_d.querySelector('.sign-tools .icon-cancel').click();
            }
          } else {
            img.src = dataUrl;if (doc_d.querySelector('.sign-tools .icon-cancel')) {
              doc_d.querySelector('.sign-tools .icon-cancel').click();
            }
          }console.log('width:' + width);console.log('height' + height);$(contract).find('#signature').find('.draggable:last img')[0].id = 'signature_d';$(contract).find('#signature').find('.draggable:last img')[0].style.maxWidth = 'initial';$(contract).find('#signature').find('.draggable:last img')[0].style.width = width + 'px'; // $(contract).find('#signature').find('.draggable:last img')[0].style.width = 150 + 'px'; 
          $(contract).find('#signature').find('.draggable:last img')[0].style.height = height + 'px'; // $(contract).find('#signature').find('.draggable:last img')[0].style.height = 50 + 'px';
        }
      }
    },
    getTemplate_uiControl161_4iHFyf: function () {
      var selfTemplate = 'module.exports = React.createClass({\n  componentDidMount: function(){\n    var _this = this;\n    var refDOM = this.refs[\'signatureSection\'];\n    var signCanvas = refDOM.querySelector(\'.signature\');\n    var _clientHeight=window.innerHeight;\n    $(".signature").jSignature({\n      \'width\' : \'2000\'\n      ,\'height\' : _clientHeight-50\n      ,\'color\' : \'#000000\'\n      ,\'background-color\': \'transparent\'\n      ,\'decor-color\': \'transparent\'\n      ,\'lineWidth\' : \'3\'\n    });\n    // console.log(refDOM.querySelector(\'.signature\'));\n    signCanvas.addEventListener(\'touchmove\',function(){\n    // signCanvas.addEventListener(\'click\',function(){\n    \t// alert(\'000\');\n    \t// debugger;\n      window.signSwitch = true;\n    })\n    // signCanvas.addEventListener(\'touchmove\',function(){\n    signCanvas.addEventListener(\'click\',function(){\n    \t// alert(\'000\');\n    \t// debugger;\n      window.signSwitch = true;\n    })\n    $(".btn.clear").on("click",function(){\n      clearCanvas();\n      this.clickToClear();\n    }.bind(this));\n    $(".btn.save").on("click",function(){\n      // debugger;\n      if(window.signSwitch){\n    \t  this.sendImgUrl();\n        // clearCanvas();\n    \t}else{\n      \talert(\'\u60A8\u8FD8\u672A\u7B7E\u540D\uFF01\');\n      }\n      // saveSignature();\n    }.bind(this))\n    $(".signBtn").on("click",function(){\n      $(".signBox").show();\n    })\n    function clearCanvas(){\n      // $(".signature").jqSignature(\'clearCanvas\');\n      $(\'.signature\').jSignature(\'clear\');\n      $("#base64signature")[0].src="";\n      window.signSwitch = false;\n      console.log(window,window.name);\n    }\n  },\n  sendImgUrl: function(e){\n    // if(e.target.ownerDocument.defaultView.signSwitch){\n    // e.target.ownerDocument.defaultView.signSwitch = false;\n    // \u6E32\u67D3\u9875\u9762\u4E2D\u7684\u56FE\u7247\u5730\u5740\n    // var dataUrl = $(\'.signature\').jqSignature(\'getDataURL\');\n    var base64="data:"+$(".signature").jSignature("getData","svgbase64");\n    // debugger;\n    $("#base64signature")[0].src=base64;\n    var width = $("#base64signature")[0].width;\n    var height = $("#base64signature")[0].height;\n    // debugger;\n    var handler = this.props.customHandler;\n    // \u4FEE\u6539\u4E91\u7B7E\n    // var dataUrl = $(\'.signature\').jqSignature(\'getDataURL\');\n    // var sharePath = "/sharefile/yunsign/image/";\n    // base64 = base64.replace(\'data:image/\',\'\');\n    // var dataUrl = sharePath + base64;\n    var dataUrl = base64;\n    // \u4FEE\u6539\u4E91\u7B7E\u7ED3\u675F\n    // debugger;\n    if(handler){\n      handler({\n        eventType: \'imgUrl\',\n        data: [dataUrl,width,height]\n      })\n    }\n    // }\n  },\n  clickToClose: function(e){\n    var handler = this.props.customHandler;\n    if(handler){\n      handler({\n        eventType: \'clickToClose\'\n      })\n    }\n  },\n  clickToClear: function(e){\n    var handler = this.props.customHandler;\n    if(handler){\n      handler({\n        eventType: \'clickToClear\'\n      })\n    }\n  },\n  render: function() {\n    var data = this.props.customData;\n    var me = this;\n    // alert(\'00\');\n    if(data && data !== \'\'){\n      return (\n        <div id=\'signatureSection\' ref=\'signatureSection\'>\n          <img id="base64signature" style={{display:"none"}} src=""/>\n          <div className="signBox">\n            <div className="controlBox">\n              <div className="btn close" onClick={me.clickToClose}></div>\n              <div className="btn clear"></div>\n              <div className="btn save"></div>\n            </div>\n            {//<div className="signature" data-width="600" data-border="none" data-background="white" data-line-color="black" data-line-width="4" data-auto-fit="true"></div>\n            }\n            <div className="signature"></div>\n          </div>\n        </div>\n      )\n    }else{\n      return (<div className=\'disnone\'></div>)\n    }\n  }\n});';
      return '\'use strict\';\n\nmodule.exports = React.createClass({\n  displayName: \'exports\',\n\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n    var refDOM = this.refs[\'signatureSection\'];\n    var signCanvas = refDOM.querySelector(\'.signature\');\n    var _clientHeight = window.innerHeight;\n    $(".signature").jSignature({\n      \'width\': \'2000\',\n      \'height\': _clientHeight - 50,\n      \'color\': \'#000000\',\n      \'background-color\': \'transparent\',\n      \'decor-color\': \'transparent\',\n      \'lineWidth\': \'3\'\n    });\n    // console.log(refDOM.querySelector(\'.signature\'));\n    signCanvas.addEventListener(\'touchmove\', function () {\n      // signCanvas.addEventListener(\'click\',function(){\n      // alert(\'000\');\n      // debugger;\n      window.signSwitch = true;\n    });\n    // signCanvas.addEventListener(\'touchmove\',function(){\n    signCanvas.addEventListener(\'click\', function () {\n      // alert(\'000\');\n      // debugger;\n      window.signSwitch = true;\n    });\n    $(".btn.clear").on("click", function () {\n      clearCanvas();\n      this.clickToClear();\n    }.bind(this));\n    $(".btn.save").on("click", function () {\n      // debugger;\n      if (window.signSwitch) {\n        this.sendImgUrl();\n        // clearCanvas();\n      } else {\n        alert(\'\u60A8\u8FD8\u672A\u7B7E\u540D\uFF01\');\n      }\n      // saveSignature();\n    }.bind(this));\n    $(".signBtn").on("click", function () {\n      $(".signBox").show();\n    });\n    function clearCanvas() {\n      // $(".signature").jqSignature(\'clearCanvas\');\n      $(\'.signature\').jSignature(\'clear\');\n      $("#base64signature")[0].src = "";\n      window.signSwitch = false;\n      console.log(window, window.name);\n    }\n  },\n  sendImgUrl: function sendImgUrl(e) {\n    // if(e.target.ownerDocument.defaultView.signSwitch){\n    // e.target.ownerDocument.defaultView.signSwitch = false;\n    // \u6E32\u67D3\u9875\u9762\u4E2D\u7684\u56FE\u7247\u5730\u5740\n    // var dataUrl = $(\'.signature\').jqSignature(\'getDataURL\');\n    var base64 = "data:" + $(".signature").jSignature("getData", "svgbase64");\n    // debugger;\n    $("#base64signature")[0].src = base64;\n    var width = $("#base64signature")[0].width;\n    var height = $("#base64signature")[0].height;\n    // debugger;\n    var handler = this.props.customHandler;\n    // \u4FEE\u6539\u4E91\u7B7E\n    // var dataUrl = $(\'.signature\').jqSignature(\'getDataURL\');\n    // var sharePath = "/sharefile/yunsign/image/";\n    // base64 = base64.replace(\'data:image/\',\'\');\n    // var dataUrl = sharePath + base64;\n    var dataUrl = base64;\n    // \u4FEE\u6539\u4E91\u7B7E\u7ED3\u675F\n    // debugger;\n    if (handler) {\n      handler({\n        eventType: \'imgUrl\',\n        data: [dataUrl, width, height]\n      });\n    }\n    // }\n  },\n  clickToClose: function clickToClose(e) {\n    var handler = this.props.customHandler;\n    if (handler) {\n      handler({\n        eventType: \'clickToClose\'\n      });\n    }\n  },\n  clickToClear: function clickToClear(e) {\n    var handler = this.props.customHandler;\n    if (handler) {\n      handler({\n        eventType: \'clickToClear\'\n      });\n    }\n  },\n  render: function render() {\n    var data = this.props.customData;\n    var me = this;\n    // alert(\'00\');\n    if (data && data !== \'\') {\n      return React.createElement(\n        \'div\',\n        { id: \'signatureSection\', ref: \'signatureSection\' },\n        React.createElement(\'img\', { id: \'base64signature\', style: { display: "none" }, src: \'\' }),\n        React.createElement(\n          \'div\',\n          { className: \'signBox\' },\n          React.createElement(\n            \'div\',\n            { className: \'controlBox\' },\n            React.createElement(\'div\', { className: \'btn close\', onClick: me.clickToClose }),\n            React.createElement(\'div\', { className: \'btn clear\' }),\n            React.createElement(\'div\', { className: \'btn save\' })\n          ),\n          React.createElement(\'div\', { className: \'signature\' })\n        )\n      );\n    } else {\n      return React.createElement(\'div\', { className: \'disnone\' });\n    }\n  }\n});';
    }
  });
})(window, ysp);